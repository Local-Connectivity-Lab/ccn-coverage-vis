(this["webpackJsonpcnn-coverage-vis"]=this["webpackJsonpcnn-coverage-vis"]||[]).push([[0],{205:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),o=a.n(i),c=(a(91),a(8)),s=a(230),l=a(237),d=a(238),u=a(207),p=a(240),h=a(232),j=a(239),b=(a(51),a(3)),f={ping:1,upload_speed:1,download_speed:1};function m(e){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(s.a,{children:Object(b.jsxs)(j.a,{component:"fieldset",disabled:e.loading,children:[Object(b.jsx)(u.a,{variant:"overline",children:"Map Type"}),Object(b.jsxs)(p.a,{row:!0,"aria-label":"gender",name:"gender1",value:e.mapType,onChange:function(t){var a=t.target.value;if(!(a in f))throw new Error("Invalid map type selection: "+a);e.setMapType(a)},children:[Object(b.jsx)(h.a,{value:"upload_speed",control:Object(b.jsx)(d.a,{}),label:"Upload Speed"}),Object(b.jsx)(h.a,{value:"download_speed",control:Object(b.jsx)(d.a,{}),label:"Download Speed"}),Object(b.jsx)(h.a,{value:"ping",control:Object(b.jsx)(d.a,{}),label:"Ping"})]})]})})})}var v=a(234),g=a(241),x=a(242),O=a(235),y=a(236),S=a(233),w=a(93),M=a.n(w),A=Object(v.a)((function(e){return Object(g.a)({root:{flexGrow:1,marginBottom:"20px"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));function k(){var e=A();return Object(b.jsx)("div",{className:e.root,children:Object(b.jsx)(x.a,{position:"static",children:Object(b.jsxs)(O.a,{children:[Object(b.jsx)(S.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(b.jsx)(M.a,{})}),Object(b.jsx)(u.a,{variant:"h6",className:e.title,children:"CCN - Performance Evaluation"}),Object(b.jsx)(y.a,{color:"inherit",children:"About"})]})})})}var C=a(96),L=a(94).map((function(e){var t=e.name;return{label:t,value:t}})),T=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(u.a,{variant:"overline",children:"Select Sites"}),Object(b.jsx)(C.a,{options:L,value:e.selectedSites,onChange:e.setSelectedSites,labelledBy:"Select",disabled:e.loading})]})},E=a(10),B=a.n(E),N=a(28),W=a(17),R=a(14),D=a(13),P=new Map([["active","green"],["confirmed","yellow"],["in-conversation","red"]]);function U(e){return e.every(G)}function G(e){return"string"===typeof(null===e||void 0===e?void 0:e.name)||"number"===typeof(null===e||void 0===e?void 0:e.latitude)||"number"===typeof(null===e||void 0===e?void 0:e.longitude)||"string"===typeof(null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.status)in P}function J(e){return R.marker([e.latitude,e.longitude]).bindPopup("".concat(e.name,' <span style="background-color: ').concat(P.get(e.status),'">[').concat(e.status,"]</span><br />").concat(e.address))}function z(e){var t=e.map,a=e.center,n=e.minLat,r=e.minLon,i=e.maxLat,o=e.maxLon,c=e.width,s=e.height,l=t.project(a),d=l.x,u=l.y,p=t.project([n,r]),h=[Math.floor(Math.min(d-c/2,p.x-c/10)),Math.ceil(Math.max(u+s/2,p.y+s/10))],j=t.project([i,o]),b=[Math.ceil(Math.max(d+c/2,j.x+c/10)),Math.floor(Math.min(u-s/2,j.y-s/10))],f=t.unproject(h),m=t.unproject(b),v=R.latLngBounds(f,m);return t.setMaxBounds(v).on("drag",(function(){return t.panInsideBounds(v,{animate:!1})})),{width:b[0]-h[0],height:h[1]-b[1],left:h[0],top:b[1]}}var H=a(95),_=150,F=40,I=_/64;var K=function(e){var t=e.colorDomain,a=e.title,r=e.width,i=Object(n.useRef)(null);if(t&&i.current){var o=D.i(t,D.d),c=D.b(".2f"),s=D.j(i.current).attr("width",r).attr("height",_).attr("viewBox",[0,0,r,_].join(" ")).style("overflow","visible").style("display","block");s.selectAll("*").remove();var l=Object.assign(o.copy().interpolator(D.c(F,_-0)),{range:function(){return[_-0,F]}});s.append("image").attr("x",0).attr("y",F).attr("width",r-0-15).attr("height",_-F-0).attr("preserveAspectRatio","none").attr("xlink:href",function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,a=Object(H.createCanvas)(1,t),n=a.getContext("2d"),r=0;r<t;++r)n.fillStyle=e(r/(t-1)),n.fillRect(0,r,1,1);return a}(o.interpolator(),_-F-0).toDataURL());var d=Math.round(I+1),u=D.h(d).map((function(e){var t;return null!==(t=D.g(o.domain(),e/(d-1)))&&void 0!==t?t:NaN}));s.append("g").attr("transform","translate(".concat(0,",",0,")")).call(D.a(l).ticks(I,"string"===typeof c?c:void 0).tickSize(6).tickValues(u)).call((function(e){return e.selectAll(".tick line").attr("x1",r-15-0)})).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.append("text").attr("y",28).attr("x",r-15-0-2).attr("fill","currentColor").attr("text-anchor","begin").attr("font-weight","bold").attr("class","title").text(a)}))}return Object(b.jsx)("svg",{id:"map-legend",ref:i,className:"leaflet-control"})};function V(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(W.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y="https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}".concat(devicePixelRatio>1?"@2x":"",".png"),q="http://attu.cs.washington.edu:7593/",Q=function(e){var t=e.mapType,a=e.selectedSites,r=e.setLoading,i=e.width,o=e.height,s=Object(n.useState)(),l=Object(c.a)(s,2),d=l[0],u=l[1],p=Object(n.useState)(),h=Object(c.a)(p,2),j=h[0],f=h[1],m=Object(n.useState)(),v=Object(c.a)(m,2),g=v[0],x=v[1],O=Object(n.useState)(new Map),y=Object(c.a)(O,2),S=y[0],w=y[1],M=Object(n.useState)(),A=Object(c.a)(M,2),k=A[0],C=A[1];return Object(n.useEffect)((function(){Object(W.a)(B.a.mark((function e(){var t,a,n,c,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(q+"dataRange");case 2:return t=e.sent,e.next=5,V(q+"sites");case 5:if(a=e.sent,n=R.map("map-id").setView(t.center,10),c=z(Object(N.a)(Object(N.a)({},t),{},{map:n,width:i,height:o})),s=new Map,U(a)){e.next=11;break}throw new Error("data has incorrect type");case 11:a.forEach((function(e){return s.set(e.name,J(e))})),R.tileLayer(Y,{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',maxZoom:15,minZoom:10,opacity:.5}).addTo(n),w(s),x(c),f(n),C(R.layerGroup().addTo(n)),r(!1);case 18:case"end":return e.stop()}}),e)})))()}),[r,i,o]),Object(n.useEffect)((function(){j&&S&&S.forEach((function(e,t){a.some((function(e){return e.label===t}))?e.addTo(j):e.removeFrom(j)}))}),[a,j,S]),Object(n.useEffect)((function(){j&&g&&k&&(r(!0),Object(W.a)(B.a.mark((function e(){var n,i,o,c,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(q+"data?"+new URLSearchParams([["width",g.width+""],["height",g.height+""],["left",g.left+""],["top",g.top+""],["binSizeShift","1"],["zoom","10"],["selectedSites",a.map((function(e){return e.label})).join(",")],["mapType",t]]));case 2:o=e.sent,c=[null!==(n=D.e(o,(function(e){return e})))&&void 0!==n?n:1,null!==(i=D.f(o,(function(e){return e})))&&void 0!==i?i:0],s=D.i(c,D.d),u(c),k.clearLayers(),o.forEach((function(e,t){if(e){var a=(t/g.height<<1)+g.left,n=(t%g.height<<1)+g.top,r=j.unproject([a,n],10),i=j.unproject([a+2,n+2],10);R.rectangle(R.latLngBounds(r,i),{fillColor:s(e),fillOpacity:.75,stroke:!1}).addTo(k)}})),r(!1);case 9:case"end":return e.stop()}}),e)})))())}),[a,t,r,j,k,g]),Object(b.jsxs)("div",{style:{position:"relative"},children:[Object(b.jsx)("div",{id:"map-id",style:{height:o,width:i,position:"absolute"}}),Object(b.jsx)("div",{style:{position:"absolute",left:i-25},children:Object(b.jsx)(K,{colorDomain:d,title:t,width:25})})]})};var X=function(){var e=Object(n.useState)("ping"),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),d=o[0],u=o[1],p=Object(n.useState)(!0),h=Object(c.a)(p,2),j=h[0],f=h[1];return document.title="Performance Evaluation",Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(k,{}),Object(b.jsx)(s.a,{children:Object(b.jsxs)(l.a,{container:!0,spacing:3,children:[Object(b.jsx)(l.a,{item:!0,xs:3,children:Object(b.jsx)(T,{selectedSites:d,setSelectedSites:u,loading:j})}),Object(b.jsxs)(l.a,{item:!0,xs:9,children:[Object(b.jsx)(m,{mapType:a,setMapType:r,loading:j}),Object(b.jsx)(Q,{mapType:a,selectedSites:d,setLoading:f,width:910,height:600})]})]})})]})};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(X,{})}),document.getElementById("root"))},91:function(e,t,a){},94:function(e){e.exports=JSON.parse('[{"name":"David-TCN","latitude":47.23911,"longitude":-122.44989,"status":"active","address":"2309 S L St, Tacoma, WA 98405"},{"name":"SURGEtacoma","latitude":47.23854,"longitude":-122.44094,"status":"confirmed","address":"2367 Tacoma Ave S, Tacoma, WA 98402"},{"name":"Filipino Community Center","latitude":47.5501,"longitude":-122.2872,"status":"confirmed","address":"5740 Martin Luther King Jr Way S, Seattle, WA 98118"},{"name":"Oareao OCC Masjid","latitude":47.52391,"longitude":-122.27636,"status":"in-conversation","address":"8812 Renton Ave S, Seattle, WA 98118"},{"name":"ALTSpace","latitude":47.60816,"longitude":-122.30192,"status":"in-conversation","address":"2318 E Cherry St, Seattle, WA 98122"},{"name":"Franklin High School","latitude":47.576,"longitude":-122.29307,"status":"in-conversation","address":"3013 S Mt Baker Blvd, Seattle, WA 98144"},{"name":"Garfield High School","latitude":47.60533,"longitude":-122.3018,"status":"in-conversation","address":"400 23rd Ave, Seattle, WA 98122"},{"name":"Skyway Library","latitude":47.49049,"longitude":-122.23853,"status":"in-conversation","address":"12601 76th Ave S, Seattle, WA 98178"},{"name":"University Heights Center","latitude":47.66613,"longitude":-122.31374,"status":"in-conversation","address":"5031 University Way NE, Seattle, WA 98105"},{"name":"Hillside Church Kent","latitude":47.38639,"longitude":-122.22205,"status":"in-conversation","address":"930 E James St, Kent, WA 98031"}]')}},[[205,1,2]]]);
//# sourceMappingURL=main.d8b8e3e6.chunk.js.map